<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>22810209</title>
    <link rel="stylesheet" href="22810209.css" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <!-- Câu 1 -->
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="col-7">
                    <h1>22810209 - LÂM TRONG NGHĨA</h1>
                    <a href="https://www.w3schools.com/">https://www.w3schools.com/</a>
                    <div>Đã hoàn thành video 0</div>
                    <a href="#card" class="bton bton-pink">Câu 2</a>
                    <a href="#footer" class="bton bton-black">Câu 3</a>
                </div>

                <div class="col-5">
                    <img src="images/cau1-img.png" class="float-end">
                </div>
            </div>
        </div>
    </div>

    <!-- Câu 2 -->
    <div class="container">
        <div class="row" id="card"></div>
    </div>

    <!-- Câu 3 -->
    <div class="container" id="footer">
        <div class="row images">
            <div class="col-8">
                <div class="card h-100">
                    <img src="images/cau3-img.png" class="card-img-top" alt="..." width="680" height="420">
                </div>
            </div>
        </div>
        <div class="row form">
            <div class="col-7"></div>
            <div class="col-5">
                <form action="" onsubmit="checkform(event)">
                    <div class="row">
                        <label for="FullName">Name *</label>
                        <input class="form-control" type="text" id="FullName" name="FullName" required>
                    </div>
                    <div class="row">
                        <label for="Email">Email *</label>
                        <input class="form-control" type="text" id="Email" name="Email"
                            pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,4}$" required>
                    </div>
                    <div class="row">
                        <label for="Message">Message *</label>
                        <textarea class="form-control" multiple type="text" id="Message" name="Message"
                            required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-9"></div>
                        <div class="col-3">
                            <input type="submit" class="bton bton-pink" value="SEND" onclick="checkform(event)">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" id="modal">
            </div>
        </div>
    </div>
    <script src="vendor/data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script type="text/x-handlebars-template" id="template">
        {{#each data}}
        <div class="col">
            <div class="card h-100">
                <img src="{{imagePath}}" class="card-img-top" alt="...">
                <div class="card-body h-100">
                    <h5 class="card-title">{{title}}</h5>
                    <p class="card-text">{{summary}}</p>
                </div>
                <div class="card-body float-bottom">
                    <a href="" onclick="loadDataModal({{id}})" data-bs-toggle="modal" data-bs-target="#exampleModal" class="card-btn">Read more</a>
                </div>
            </div>
        </div>  
        {{/each}}
    </script>

    <script type="text/x-handlebars-template" id="template-modal">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">{{title}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div><img src="{{imagePath}}" alt=""></div>
            <div>{{description}}</div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
    </script>
    <script>
        let email = document.getElementById("Email");
        let name = document.getElementById("FullName");
        let message = document.getElementById("Message");

        function checkform(e) {
            if (name.value == '') {
                name.setCustomValidity('Please enter your name');
                return;
            } else {
                name.setCustomValidity('');
            }

            email.setCustomValidity('');
            if (email.value == '') {
                email.setCustomValidity('Please enter your email address');
                return;
            }

            if (message.value == '') {
                message.setCustomValidity('Please enter your message');
                return;
            } else {
                message.setCustomValidity('');
            }

            e.preventDefault();
            alert("Please come back later!");
        }

        name.addEventListener('input', function () {
            // Reset custom validity
            name.setCustomValidity('');
            if (name.value == '') {
                name.setCustomValidity('Please enter your name');
            }
        });

        email.addEventListener('input', function () {
            // Reset custom validity
            email.setCustomValidity('');
            if (!email.checkValidity()) {
                email.setCustomValidity('Please enter your email in the correct format');
            }
        });

        message.addEventListener('input', function () {
            // Reset custom validity
            message.setCustomValidity('');
            if (message.value == '') {
                message.setCustomValidity('Please enter your message');
            }
        });

        function loadData() {
            let jsonData = {
            data: getAll()
            }
            console.log(jsonData);

            let sourceTemplate = document.getElementById("template").innerHTML;
            var template = Handlebars.compile(sourceTemplate);
            console.log(template({data: jsonData.data}));
            document.getElementById("card").innerHTML = template({data: jsonData.data});
        }

        function loadDataModal(id) {
            let jsonData = {
            data: getOne(id)
            }
            console.log(jsonData);

            let sourceTemplate = document.getElementById("template-modal").innerHTML;
            var template = Handlebars.compile(sourceTemplate);
            console.log(template(jsonData.data[0]));
            document.getElementById("modal").innerHTML = template(jsonData.data[0]);
        }

        loadData();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>